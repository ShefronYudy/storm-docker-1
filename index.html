<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>storm-docker - Making distributed, multiple server Storm setups easy, in Docker</title>

    <link href="stylesheets/styles.css" rel="stylesheet" type="text/css" /><link href="stylesheets/pygment_trac.css" rel="stylesheet" type="text/css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/all.js" type="text/javascript"></script>

    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  </head>
  

  <body class="index">
    <header>
      <a href="">
        <h1>storm-docker</h1>
        <p>Making distributed, multiple server Storm setups easy, in Docker</p>
      </a>
    </header>

    <div id="banner">
      <div class="banner-inner">
        <span id="logo"></span>

        <a href="https://github.com/viki-org/storm-docker" class="button fork"><strong>Fork On GitHub</strong></a>
        <div class="downloads">
          <span>Downloads:</span>
          <ul>
            <li><a href="https://github.com/viki-org/storm-docker/zipball/master" class="button">ZIP</a></li>
            <li><a href="https://github.com/viki-org/storm-docker/tarball/master" class="button">TAR</a></li>
          </ul>
        </div>
      </div>
    </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <!-- javascripts/main.js appends links in the <ul> element for every <h1> and <h2> inside the main section -->
        <ul></ul>
      </nav>

      <section>
        <h1>storm-docker</h1>

<p>This repository makes it easy to run <strong>distributed, multiple server</strong>
(multiple Zookeeper, multiple Storm Supervisor)
<a href="http://storm.incubator.apache.org/">Storm</a> topologies within
<a href="https://www.docker.io/">Docker</a>.</p>

<h2>System Requirements</h2>

<ul>
<li>GNU Make</li>
<li>Docker</li>
<li>python 2.7.x</li>
<li>virtualenv</li>
</ul>

<h2>Software Setup</h2>

<h3>Python setup</h3>

<p>We will be making use of <a href="http://virtualenv.readthedocs.org/en/latest/">virtualenv</a>
for some of the Python scripts in this repository. We also make use of the
<a href="http://pyyaml.org/">PyYAML</a> library, and that requires some Python header
files.</p>

<p>On a Ubuntu-like system:</p>

<pre><code>sudo apt-get install python-virtualenv
sudo apt-get install python-dev
</code></pre>

<h3>Install Docker</h3>

<p>For Ubuntu Precise 12.04 (LTS), ensure that your Linux Kernel is a relatively
recent version (check the docs here:
http://docs.docker.io/installation/ubuntulinux/ for more information).</p>

<p>Use the following command from the top of the script at http://get.docker.io
to install Docker</p>

<pre><code>wget -qO- https://get.docker.io/ | bash
</code></pre>

<p>Verify your Docker installation:</p>

<pre><code>docker info
</code></pre>

<h3>Cloning this repository</h3>

<p>Clone this repository, preferrably to <code>$HOME/workspace/storm-docker</code>.
At <code>$HOME/workspace</code>:</p>

<pre><code>git clone git@github.com:viki-org/storm-docker.git
</code></pre>

<p>The next few commands will be run from the <code>storm-docker</code> repository. Let us
go there:</p>

<pre><code>cd storm-docker
</code></pre>

<h2>Configuration</h2>

<h3>Configuring the Storm setup</h3>

<p><strong>NOTE:</strong> This step is <strong>critical</strong> to the correct functioning of the Storm
topology.</p>

<p>Copy the sample configuration files to concrete configuration files (this does
not overwrite any existing concrete configuration files):</p>

<pre><code>./copy-sample-config.sh
</code></pre>

<p>Carry on by editing the following concrete configuration files:</p>

<ul>
<li><code>config/storm-setup.yaml</code></li>
<li><code>config/cluster.xml</code></li>
<li><code>config/zoo.cfg</code></li>
</ul>

<p>Documentation is available in the copied concrete configuration files, except
the <code>config/cluster.xml</code> file used for logback configuration. For that, we
highly recommend reading
<a href="http://logback.qos.ch/manual/">The logback manual</a>.</p>

<p>Once done with your edits, we can continue with building the Docker images.</p>

<h3>Building the Docker images</h3>

<p><strong>NOTE:</strong> This step is necessary after making changes to <strong>any</strong> of the
configuration files in the above subsection.</p>

<p>Run the <strong>GNU</strong> <code>make</code> command. The default goal builds the Docker images:</p>

<pre><code>make
</code></pre>

<p>If this is the first time the Docker images are being built, this script will
take some time to complete.</p>

<h2>Running the Storm components</h2>

<h3>Run the Docker containers</h3>

<p>To run all Docker containers for this repository on your current machine:</p>

<pre><code>./start-storm.sh
</code></pre>

<p>You should not see any errors if configuration is done correctly.</p>

<p>For more information on running individual containers, run:</p>

<pre><code>./start-storm.sh --help
</code></pre>

<h2>Stopping Docker containers</h2>

<p>To stop all running Docker containers for this repository:</p>

<pre><code>./destroy-storm.sh
</code></pre>

<p>To stop individual containers, supply them as arguments to the
<code>destroy-storm.sh</code> script, for instance to stop the <code>ui</code> and <code>zookeeper</code>
containers:</p>

<pre><code>./destroy-storm.sh ui zookeeper
</code></pre>

<h2>Motivation</h2>

<p>This project was started to address the need to increase the scalability and
fault tolerance of Viki&rsquo;s Storm cluster. A lot of effort was spent figuring out
how to run multiple Storm Supervisor and Zookeeper in Docker.</p>

<p>This repository should be viewed more as a foundation on which you can build
on for running your Storm cluster in Docker, rather than as a defacto standard
for running Storm in Docker.</p>

<p>To better aid someone new to the codebase to understanding and subsequently
modifying the code, much of the core Python code contains rather extensive
inline documentation.</p>

<h2>Credits</h2>

<p>This repository was originally based on
<a href="https://github.com/wurstmeister/storm-docker">wurstmeister/storm-docker</a>;
big thanks to wurstmeister for making his project open source.</p>

      </section>

      <footer>
        <p><span class="small">Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></span></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
  </body>
</html>
